<html><head>
<meta charset="UTF-8">
<title>catch_error documentation</title>
<meta name="viewport" content="width=device-width" />
<meta name="livenode" content="#doc" />
<meta property="theme-color" content="#FFF037" />
<meta property="og:type" content="article" />
<meta property="og:locale" content="en_us" />
<meta property="og:site_name" content="YellowAfterlife" />
<meta property="og:title" content="catch_error documentation" />
<meta property="og:url" content="https://yal.cc/r/19/catch_error/" />
<meta property="og:description" content="catch_error is an extension that brings error handling to GameMaker." />
<script type="text/javascript">
if (document.location.host == "yal.cc" && location.protocol == "http:") {
	document.location.protocol = "https:";
	return;
}
</script>
<style type="text/css">
body, #doc tt {
	font: 15px 'Open Sans', sans-serif;
	line-height: 1.35;
}
body {
	margin: 0;
}
.main {
	width: 100%;
	min-height: 100%;
	min-height: 100vh;
	background-color: #f9f9f9;
}
.page {
	max-width: 656px;
	background: #ffffff;
	margin: 0 auto;
	padding: 8px;
	box-shadow: 0 0 0 2px #eee;
	min-height: 100%;
	min-height: 100vh;
	box-sizing: border-box;
}
.page > p:first-child {
	margin-top: 0;
}

#doc, #doc ul, #doc ol {
	padding-left: 0;
	margin: 0;
}
#doc div ul, #doc div ol {
	padding-left: 20px;
}
#doc div ul li {
	list-style: disc;
	list-style-image: url('data:image/svg+xml;base256,<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="1em" viewBox="0 0 20px 1em"><circle cx="17px" cy="0.675em" r="2px"/></svg>'); 
}

#doc .header {
	display: block;
	outline: none;
	text-decoration: none;
	margin: 0;
	font-weight: 700;
	font-size: 100%;
	color: #458;
	border-left: 2px solid #f3f3f3;/* #f9f9f9*/
	padding-left: 4px;
	padding-top: 1px;
	padding-bottom: 1px;
	cursor: pointer;
}
#doc .header::before {
	display: inline-block;
	content: "+";
	font: 12px monospace;
	border: 1px solid #458;
	line-height: 11px;
	height: 11px;
	width: 11px;
	text-align: center;
	border-radius: 50%;
	margin-right: 4px;
	vertical-align: middle;
	position: relative;
	top: -1px;
}
#doc .item.open > .header::before {
	content: "-";
}
#doc .item.empty > .header::before {
	content: /*"Â·"*/" ";
}
#doc .header:hover {
	border-left-color: #f3f3f3;
	background: #f3f3f3;
}
#doc .header .ret-arrow {
	font-weight: normal;
	margin: 0 0.1em;
}

#doc a.broken {
	color: red;
}
#doc p {
	margin: 0;
}
#doc p + p, #doc p.pad {
	margin-top: 0.5em;
}
#doc img {
	max-width: 100%;
}
#doc h3 {
	margin: 0.25em 0;
	font-size: 125%;
	font-weight: normal;
	border-bottom: 1px solid #ccc;
}

#doc .content, #doc ul {
	padding-left: 20px;
	border-left: 2px solid #f3f3f3;
}
#doc tt {
	font-weight: bold;
}
#doc pre {
	font-family: Consolas, Dejavu Sans Mono, Segoe UI Mono, Ubuntu Mono, Lucida Console, monospace;
	font-size: 9pt;
	line-height: 1.25;
	background: white;
	padding: 4px 2px 4px 10px;
	margin: 0;
	tab-size: 4;
	overflow-x: auto;
	white-space: pre-wrap;
	word-break: break-all;
}
#doc pre a {
	text-decoration: none;
}
#doc pre a.uf {
	background-color: #f7f0ff;
}
#doc pre a.kw {
	background-color: #f0f7ff;
}
#doc pre a.sf, #doc pre a.sv {
	background-color: #fff3f0;
}
#doc pre a:hover {
	text-decoration: underline;
}
#doc abbr[title] {
	text-decoration: underline;
	text-decoration-color: #bbb;
	text-decoration-style: double;
}
/* delay display until load */
#doc[ready] .item:not(.open) > .content {
	display: none;
}
</style>
<style type="text/css" id="md_gml">
/* GameMakerLanguage */
pre.gmlmd .md { color: #7A81A9 } /* #define */
pre.gmlmd .kw { color: #008; font-weight: bold } /* keyword */
pre.gmlmd .co { color: #080 } /* comment */
pre.gmlmd .nu { color: #00f } /* number */
pre.gmlmd .nx { color: #00f } /* hex */
pre.gmlmd .st { color: #00f } /* string */
pre.gmlmd .ts { color: #00f } /* template string */
pre.gmlmd .op { color: #000 } /* operator */
pre.gmlmd .cb { color: #008; font-weight: bold } /* curly brace */
pre.gmlmd .sv { color: #800 } /* std func */
pre.gmlmd .sf { color: #800 } /* std var */
pre.gmlmd .ri { color: #0078aa } /* assets */
pre.gmlmd .uf { color: #808 } /* user func */
pre.gmlmd .uv { color: #000 } /* user var */
pre.gmlmd .lv { color: #648 } /* local var */
pre.gmlmd .fd { color: #804 } /* field */
</style>
<style type="text/css" id="night_css">
#night { display: none }
label[for="night"] {
	color: blue;
	text-decoration: underline;
	cursor: pointer;
}
#night:checked + .main {
	background-color: #405070;
}
#night:checked + .main .page {
	background-color: #1A202D;
	box-shadow: 0 0 0 2px #9bccff63;
	color: white;
}
#night:checked + .main a,
#night:checked + .main a:visited,
#night:checked + .main #doc .header,
#night:checked + .main label[for="night"] {
	color: #9DEC76;
}
#night:checked + .main #doc .header:before,
#night:checked + .main #doc h3 {
	border-color: #9DEC76
}
#night:checked + .main #doc .header,
#night:checked + .main #doc .header:hover,
#night:checked + .main #doc .content,
#night:checked + .main #doc ul {
	border-left-color: rgba(205,225,255,0.1);
}
#night:checked + .main #doc .header:hover,
#night:checked + .main #doc .asset:hover {
	background: rgba(205,225,255,0.1);
}
#night:checked + .main div ul li {
	list-style-image: url('data:image/svg+xml;base256,<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="1em" viewBox="0 0 20px 1em"><circle cx="17px" cy="0.675em" r="2px" fill="white"/></svg>'); 
}
#night:checked + .main pre {
	color: #cccccc;
	background: #000000;
	border: 1px solid #3E4757;
}
#night:checked + .main pre.gmlmd .op { color: #CCCCCC }
#night:checked + .main pre.gmlmd .co { color: #5B995B }
#night:checked + .main pre.gmlmd .kw { color: #FFB871 }
#night:checked + .main pre.gmlmd .md { color: #FFB871 }
#night:checked + .main pre.gmlmd .cb { color: #FFB871 }
#night:checked + .main pre.gmlmd .sf { color: #FFB871 }
#night:checked + .main pre.gmlmd .uf { color: #FFB871 }
#night:checked + .main pre.gmlmd .nu { color: #FF8080 }
#night:checked + .main pre.gmlmd .st { color: #FCF320 }
#night:checked + .main pre.gmlmd .ts { color: #FF8080 }
#night:checked + .main pre.gmlmd .sv { color: #FF8080 }
#night:checked + .main pre.gmlmd .gv { color: #FF80FF }
#night:checked + .main pre.gmlmd .ri { color: #FF8080 }
#night:checked + .main pre.gmlmd .lv { color: #FFF899 }
#night:checked + .main pre.gmlmd .uv { color: #B2B1FF }
#night:checked + .main pre.gmlmd .fd { color: #B2B1FF }

#night:checked + .main pre.gmlmd a.uf {
	background-color: #431;
}
#night:checked + .main pre.gmlmd a.kw {
	background-color: #431;
}
#night:checked + .main pre.gmlmd a.sf,
#night:checked + .main pre.gmlmd a.sv {
	background-color: #431;
}
</style>
<style>
.main.boxtt #doc tt {
	display: inline-block;
	background: #FFFBE4;
	font-family: Consolas, Ubuntu Mono, Dejavu Sans Mono, Lucida Console, monospace;
	font-weight: normal;
	font-size: 12px;
	line-height: 16px;
	padding: 0 2px;
	border: 1px solid #E6E0C4;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	max-width: 100%;
	word-break: break-word;
}
#night:checked + .main.boxtt #doc tt {
	background-color: #000;
	border-color: #5b7c9f;
	color: white;
}
</style>
<noscript><style>
#doc .header::before {
	display: none;
}
#doc .header:hover {
	border-left-color: #f3f3f3;
	background: inherit;
}
#doc { display: inherit }
#doc .item:not(.open) > .content {
	display: inherit;
}
</style></noscript>
</head><body>
<input type="checkbox" id="night" checked/>
<div class="main boxtt">
<script type="text/javascript">
(function() {
	var night = document.getElementById("night");
	var path = "docmd night mode";
	var ls = window.localStorage;
	if (ls) {
		night.checked = ls.getItem(path) == "true";
		night.onchange = function(_) {
			ls.setItem(path, "" + night.checked);
		};
	}
})();
</script>
<div class="page">
<p>This is a function "cheat sheet" for the catch_error extension by YellowAfterlife.<br/>The extension can be acquired via <a href="https://yellowafterlife.itch.io/gamemaker-catch_error">itch.io</a>.<br/>A most up-to-date version of the manual is always <a href="https://yal.cc/r/19/catch_error/">available online</a>.</p><p>
Click on sections to expand/collapse them.<br>
Quick display controls: <a href="#" onclick="opt_none(); return false">Categories</a>
&middot; <a href="#" onclick="opt_list(); return false">Sections</a>
&middot; <a href="#" onclick="opt_all(); return false">Everything</a>
&middot; <label for="night">Toggle night mode</label><br/>
</p><div id="doc">
<!--<doc--><div class="item"><span class="header">General functions</span><div class="content"><p>
	<div class="item"><a class="header" id="catch_error_init" href="#catch_error_init" title="(permalink)">catch_error_init()</a><div class="content"><p>
		Should be called for any other functions to have any effect.
		</p><p>
		Returns whether successful (<tt>&gt; 0</tt>).
		</p><p>
		Generally, can only fail is the DLL is missing/failed to load.
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_is_ready" href="#catch_error_is_ready" title="(permalink)">catch_error_is_ready()</a><div class="content"><p>
		Returns whether the initialization is done and everything is good to go.
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_is_loaded" href="#catch_error_is_loaded" title="(permalink)">catch_error_is_loaded()</a><div class="content"><p>
		Returns whether the DLL is successfully loaded.
		</p><p>
		If this is false, it is either missing entirely or the user has some serious setup issues.
	</p></div></div>
</p></div></div>
<div class="item"><a class="header" id="catch_error_" href="#catch_error_" title="(permalink)">Error handling</a><div class="content"><p>
	<div class="item"><a class="header" id="catch_error_normal_" href="#catch_error_normal_" title="(permalink)">Normal errors</a><div class="content"><p>
		"Normal" errors are the ones that have an "ignore" button in their dialog.
		</p><p>
		These are captured consistently and pretty future-proof -
		the only way the capture mechanism
		could break is if error dialog handling gets rewritten completely.
		<div class="item"><a class="header" id="catch_error_set_normal" href="#catch_error_set_normal" title="(permalink)">catch_error_set_normal(mode)</a><div class="content"><p>
			Defines how non-fatal errors should be treated.
			</p><p>
			<tt>mode</tt> can be the following:
			<div class="item"><a class="header" id="catch_error_normal_show" href="#catch_error_normal_show" title="(permalink)">catch_error_normal_show</a><div class="content"><p>
				Shows the error box (default GM behaviour)
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_normal_quit" href="#catch_error_normal_quit" title="(permalink)">catch_error_normal_quit</a><div class="content"><p>
				Treats non-fatal errors as fatal
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_normal_ignore" href="#catch_error_normal_ignore" title="(permalink)">catch_error_normal_ignore</a><div class="content"><p>
				Ignores non-fatal errors completely
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_normal_queue" href="#catch_error_normal_queue" title="(permalink)">catch_error_normal_queue</a><div class="content"><p>
				Stores non-fatal errors for retrieval via <a href="#catch_error_dequeue">catch_error_dequeue</a>.
			</p></div></div>
			
			Examples:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<span class="co">//</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_ignore">catch_error_normal_ignore</a><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"1!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span> <span class="co">// (absolutely nothing happens)</span>
<span class="co">//</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_queue">catch_error_normal_queue</a><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"2!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_debug_message</span><span class="op">(</span><span class="st">"Last error: "</span> <span class="op">+</span> <a class="sf" href="#catch_error_dequeue">catch_error_dequeue</a><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">;</span>
<span class="co">//</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_show">catch_error_normal_show</a><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"3!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span> <span class="co">// (a normal error box appears)</span>
<span class="co">//</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_quit">catch_error_normal_quit</a><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_prompt">catch_error_set_prompt</a><span class="op">(</span><a class="sv" href="#catch_error_prompt_message">catch_error_prompt_message</a><span class="op">,</span> <span class="st">"It would appear like we've crashed"</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"4!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span> <span class="co">// (a dialog box with above text appears)</span>
</pre></div></div>
		<div class="item"><a class="header" id="catch_error_get_normal" href="#catch_error_get_normal" title="(permalink)">catch_error_get_normal()</a><div class="content"><p>
			Returns the current mode for normal errors (as per constants).
		</p></div></div>
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_fatal_" href="#catch_error_fatal_" title="(permalink)">Fatal errors</a><div class="content"><p>
		"Fatal" errors are the ones that do not have an "ignore" button in their dialogs.
		</p><p>
		Usually these put an end to your game, and you could let that happen
		(either letting them show or passing them to a log file/external app, skipping the error box),
		but the extension also offers an option to catch fatal errors as well.
		
		<div class="item"><a class="header" id="catch_error_set_fatal" href="#catch_error_set_fatal" title="(permalink)">catch_error_set_fatal(mode)</a><div class="content"><p>
			Defines how fatal errors should be treated.
			</p><p>
			<tt>mode</tt> can be the following:
			<div class="item"><a class="header" id="catch_error_fatal_show" href="#catch_error_fatal_show" title="(permalink)">catch_error_fatal_show</a><div class="content"><p>
				Shows the error box (default GM behaviour)
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_fatal_quit" href="#catch_error_fatal_quit" title="(permalink)">catch_error_fatal_quit</a><div class="content"><p>
				Skips the message box
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_fatal_ignore" href="#catch_error_fatal_ignore" title="(permalink)">catch_error_fatal_ignore</a><div class="content"><p>
				Ignores fatal errors completely
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_fatal_queue" href="#catch_error_fatal_queue" title="(permalink)">catch_error_fatal_queue</a><div class="content"><p>
				Stores fatal errors for retrieval via <a href="#catch_error_dequeue">catch_error_dequeue</a>.
			</p></div></div>
			Treating fatal errors as non-fatal is obviously a little more experimental.
			While my tests indicate that the approach works with a variety of GMS/GMS2 versions
			released in past two years, I would expect this to break once GMS2 gets built-in error
			handling. But also, you wouldn't need this feature once that's a thing.
			</p><p>
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_fatal">catch_error_set_fatal</a><span class="op">(</span><a class="sv" href="#catch_error_fatal_quit">catch_error_fatal_quit</a><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_dump_path">catch_error_set_dump_path</a><span class="op">(</span><span class="st">"error.log"</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"oh no"</span><span class="op">,</span> <span class="sv">true</span><span class="op">)</span><span class="op">;</span> <span class="co">// quietly saves the error to `error.log` and exits</span>
</pre></div></div>
		<div class="item"><a class="header" id="catch_error_get_fatal" href="#catch_error_get_fatal" title="(permalink)">catch_error_get_fatal(mode)</a><div class="content"><p>
			Returns the current mode for fatal errors (as per constants).
		</p></div></div>
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_newer_" href="#catch_error_newer_" title="(permalink)">Newer-format fatal errors</a><div class="content"><p>
		<strong>Note:</strong> as of 1.0.1 / Feb 10, 2019 update newer-format errors are handled together with
		normal fatal errors, but you can still use these functions if you want to ignore them
		entirely for some reason.
		<div class="item"><a class="header" id="catch_error_newer_explain" href="#catch_error_newer_explain" title="(permalink)">Explanation</a><div class="content"><p>
			So, here's a thing: recent (~2018) versions of GM:S/GMS2 have a <em>third</em> way of throwing errors.
			If you've ever taken a peek at YYC <tt>YYGML.h</tt>, it's called <tt>YYError</tt> there.
			</p><p>
			It is used for "low-level" actions (like <tt>+</tt> or <tt>inst.vari</tt>) and a random few built-in
			functions (like <tt>vertex_begin</tt>).
			</p><p>
			The deal with it is that its code goes like this (pseudocode):
			</p><pre>
global_flag_1 = true;
if (global_flag_2) {
	// (skip to the end of the current script/event if not using YYC)
	return;
}
var error_msg = ...;
if (!global_flag_2) {
	show_error(error_msg, true); // (sort of)
	exit(-1);
}
</pre><p>where <tt>exit</tt> is <a href="http://www.cplusplus.com/reference/cstdlib/exit/">stdlib.h exit</a> -
			it immediately and unconditionally causes the game process to quit.
			Obviously, a minor inconvenience for queuing errors, as it queues the error but then
			your game closes.
			</p><p>
			To make things better, there is no way of knowing that your error comes from such a
			source, as the function is small enough to get optimized and not appear in low-level
			<a href="https://en.wikipedia.org/wiki/Call_stack">call stack</a> at all.
			</p><p>
			However, I've found that <tt>global_flag_2</tt> is also referenced inside <tt>show_error</tt>, thus
			was able to add a pair of functions to flip it back and forth, which means that you
			can omit any such errors, but can't queue their messages (because the function quits early).
			</p><p>
			This might be addressed in future.
		</p></div></div>
		<div class="item"><a class="header" id="catch_error_set_newer" href="#catch_error_set_newer" title="(permalink)">catch_error_set_newer(mode)</a><div class="content"><p>
			Defines how newer-format fatal errors should be treated.
			</p><p>
			<tt>mode</tt> can be the following:
			<div class="item"><a class="header" id="catch_error_newer_allow" href="#catch_error_newer_allow" title="(permalink)">catch_error_newer_allow</a><div class="content"><p>
				Allows newer-format fatal errors to dispatch (default GM behaviour).
				</p><p>
				As per above, if you are queuing/ignoring fatal errors, this will still result
				in your game ending.
				</p><p>
				Otherwise these are the same as regular fatal errors and will trigger the rest
				of the helper functions their way out.
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_newer_ignore" href="#catch_error_newer_ignore" title="(permalink)">catch_error_newer_ignore</a><div class="content"><p>
				Suppresses newer-format fatal errors completely - your game won't quit, but also
				the errors won't get added to the queue.
				</p><p>
				As per above, on non-YYC newer-format errors skip to the end of the current script/event, which can
				be a good or a bad thing, depending on what you are trying to do.
			</p></div></div>
		</p></div></div>
		<div class="item"><a class="header" id="catch_error_get_newer" href="#catch_error_get_newer" title="(permalink)">catch_error_get_newer()<span class="ret-arrow">&#10140;</span>catch_error_newer_</a><div class="content"><p>
			Returns the current mode for newer-format fatal errors.
			</p><p>
			Aside of the default constants, the return value can be:
			<div class="item"><a class="header" id="catch_error_newer_not_ready" href="#catch_error_newer_not_ready" title="(permalink)">catch_error_newer_not_ready</a><div class="content"><p>
				No fatal errors were requested for <a href="#catch_error_fatal_ignore">ignoring</a>
				/ <a href="#catch_error_fatal_queue">queuing</a> yet nor was
				<a href="#catch_error_set_newer">catch_error_set_newer</a> called, so we don't know yet if we can ignore them or not.
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_newer_unavailable" href="#catch_error_newer_unavailable" title="(permalink)">catch_error_newer_unavailable</a><div class="content"><p>
				The global flag required to make this feature work couldn't be found.
				</p><p>
				Obviously, this is something that can only change upon GM updates,
				so you wouldn't usually need to check for this at all.
			</p></div></div>
		</p></div></div>
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_queue_" href="#catch_error_queue_" title="(permalink)">Error queues</a><div class="content"><p>
		If you've requested your errors to be queued, you can later retrieve them.
		<div class="item"><a class="header" id="catch_error_dequeue" href="#catch_error_dequeue" title="(permalink)">catch_error_dequeue()<span class="ret-arrow">&#10140;</span>error_text</a><div class="content"><p>
			If non-fatal error handling is set to <a href="#catch_error_normal_queue">catch_error_normal_queue</a>,
			this function returns the next stored error message from the queue.
			</p><p>
			If there are no more error messages left, returns <tt>""</tt>.
			</p><p>
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_queue">catch_error_normal_queue</a><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"1!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"2!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="kw">var</span> <span class="lv">s</span> <span class="op">=</span> <span class="sf">catch_error_dequeue</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<span class="kw">while</span> <span class="op">(</span><span class="lv">s</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="cb">{</span>
    <span class="lv">s</span> <span class="op">=</span> <span class="sf">string_replace_all</span><span class="op">(</span><span class="lv">s</span><span class="op">,</span> <span class="st">"#"</span><span class="op">,</span> <span class="sf">chr</span><span class="op">(</span><span class="nu">92</span><span class="op">)</span><span class="op">+</span><span class="st">"#"</span><span class="op">)</span><span class="op">;</span> <span class="co">// GMS1 only - escape "#"s</span>
    <span class="sf">show_message</span><span class="op">(</span><span class="st">"Error: "</span> <span class="op">+</span> <span class="sf">chr</span><span class="op">(</span><span class="nu">13</span><span class="op">)</span> <span class="op">+</span> <span class="sf">chr</span><span class="op">(</span><span class="nu">10</span><span class="op">)</span> <span class="op">+</span> <span class="lv">s</span><span class="op">)</span><span class="op">;</span>
    <span class="lv">s</span> <span class="op">=</span> <span class="sf">catch_error_dequeue</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<span class="cb">}</span>
</pre><p>This would display two dialog boxes with caught error messages in order.
		</p></div></div>
		<div class="item"><a class="header" id="catch_error_size" href="#catch_error_size" title="(permalink)">catch_error_size()<span class="ret-arrow">&#10140;</span>size</a><div class="content"><p>
			Returns the current number of queued error messages.
			</p><p>
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_queue">catch_error_normal_queue</a><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"1!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"2!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_debug_message</span><span class="op">(</span><span class="sf">catch_error_size</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">;</span> <span class="co">// 2</span>
</pre></div></div>
		<div class="item"><a class="header" id="catch_error_clear" href="#catch_error_clear" title="(permalink)">catch_error_clear()<span class="ret-arrow">&#10140;</span>old_size</a><div class="content"><p>
			Clears the error message queue and returns how many messages there were in it.
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_normal">catch_error_set_normal</a><span class="op">(</span><a class="sv" href="#catch_error_normal_queue">catch_error_normal_queue</a><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"1!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"2!"</span><span class="op">,</span> <span class="sv">false</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_debug_message</span><span class="op">(</span><a class="sf" href="#catch_error_size">catch_error_size</a><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">;</span> <span class="co">// 2</span>
<span class="sf">catch_error_clear</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_debug_message</span><span class="op">(</span><a class="sf" href="#catch_error_size">catch_error_size</a><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">;</span> <span class="co">// 0</span>
</pre></div></div>
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_dump_" href="#catch_error_dump_" title="(permalink)">Dumps upon error exit</a><div class="content"><p>
		When your game exits due to an error (user-initiated or automatic via <tt>_quit</tt>),
		you can opt in to save the last error message to a file.
		</p><p>
		You can later access that file from in-game (if you saved it on a relative path)
		or external software.
		<div class="item"><a class="header" id="catch_error_set_dump_path" href="#catch_error_set_dump_path" title="(permalink)">catch_error_set_dump_path(?path)</a><div class="content"><p>
			Changes the current log file path.
			</p><p>
			Call with no arguments (or <tt>""</tt>) to disable.
			</p><p>
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_fatal">catch_error_set_fatal</a><span class="op">(</span><a class="sv" href="#catch_error_fatal_quit">catch_error_fatal_quit</a><span class="op">)</span><span class="op">;</span>
<span class="sf">catch_error_set_dump_path</span><span class="op">(</span><span class="st">"error.log"</span><span class="op">)</span><span class="op">;</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"oh no"</span><span class="op">,</span> <span class="sv">true</span><span class="op">)</span><span class="op">;</span> <span class="co">// quietly saves the error to `error.log` and exits</span>
</pre></div></div>
		<div class="item"><a class="header" id="catch_error_get_dump_path" href="#catch_error_get_dump_path" title="(permalink)">catch_error_get_dump_path()<span class="ret-arrow">&#10140;</span>path</a><div class="content"><p>
			Returns the current log file path
		</p></div></div>
	</p></div></div>
	<div class="item"><a class="header" id="catch_error_exec_" href="#catch_error_exec_" title="(permalink)">Executing external programs upon error exit</a><div class="content"><p>
		You can opt in to execute an external program when your game exits due to an error.
		This can be used to open an error reporting tool, error log location, or even restart
		the game and show the options in-game.
		
		<div class="item"><a class="header" id="catch_error_set_exec" href="#catch_error_set_exec" title="(permalink)">catch_error_set_exec(?path, ?params)</a><div class="content"><p>
			<tt>path</tt> is an <strong>absolute</strong> (<tt>C:/...</tt>, etc.) path to application to be ran.
			</p><p>
			<tt>params</tt> is a string of parameters to pass to the application.
			</p><p>
			If called without arguments, reverts to not running anything.
			</p><p>
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_prompt">catch_error_set_prompt</a><span class="op">(</span><a class="sv" href="#catch_error_prompt_question">catch_error_prompt_question</a><span class="op">,</span>
    <span class="st">"We've hit an error. Would you like to restart the app?"</span><span class="op">,</span>
    <span class="st">"Oh no,"</span><span class="op">)</span><span class="op">;</span>
<span class="co">// let the game restart on error:</span>
<span class="kw">var</span> <span class="lv">argv</span> <span class="op">=</span> <span class="st">""</span><span class="op">,</span> <span class="lv">argc</span> <span class="op">=</span> <span class="sf">parameter_count</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<span class="kw">for</span> <span class="op">(</span><span class="kw">var</span> <span class="lv">i</span> <span class="op">=</span> <span class="nu">1</span><span class="op">;</span> <span class="lv">i</span> <span class="op">&lt;</span> <span class="lv">argc</span><span class="op">;</span> <span class="lv">i</span><span class="op">++</span><span class="op">)</span> <span class="cb">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="lv">i</span> <span class="op">&gt;</span> <span class="nu">1</span><span class="op">)</span> <span class="lv">argv</span> <span class="op">+=</span> <span class="st">" "</span><span class="op">;</span>
    <span class="kw">var</span> <span class="lv">v</span> <span class="op">=</span> <span class="sf">parameter_string</span><span class="op">(</span><span class="lv">i</span><span class="op">)</span><span class="op">;</span>
    <span class="kw">if</span> <span class="op">(</span><span class="sf">string_pos</span><span class="op">(</span><span class="st">" "</span><span class="op">,</span> <span class="lv">v</span><span class="op">)</span><span class="op">)</span> <span class="lv">argv</span> <span class="op">+=</span> <span class="st">'"'</span> <span class="op">+</span> <span class="lv">v</span> <span class="op">+</span> <span class="st">'"'</span><span class="op">;</span> <span class="kw">else</span> <span class="lv">argv</span> <span class="op">+=</span> <span class="lv">v</span><span class="op">;</span>
<span class="cb">}</span>
<span class="uf">catch_error_exec</span><span class="op">(</span><span class="sf">parameter_string</span><span class="op">(</span><span class="nu">0</span><span class="op">)</span><span class="op">,</span> <span class="lv">argv</span><span class="op">)</span><span class="op">;</span>
<span class="co">//</span>
<span class="sf">show_error</span><span class="op">(</span><span class="st">"oh no"</span><span class="op">,</span> <span class="sv">true</span><span class="op">)</span><span class="op">;</span> <span class="co">// shows the restart question prompt</span>
</pre></div></div>
		<div class="item empty"><a class="header" id="catch_error_get_exec_path" href="#catch_error_get_exec_path" title="(permalink)">catch_error_get_exec_path()<span class="ret-arrow">&#10140;</span>path</a></div>
		<div class="item empty"><a class="header" id="catch_error_get_exec_params" href="#catch_error_get_exec_params" title="(permalink)">catch_error_get_exec_params()<span class="ret-arrow">&#10140;</span>parameters</a></div>
	</p></div></div>
	<div class="item"><a class="header" id="Custom" href="#Custom" title="(permalink)">Custom error prompt upon error exit</a><div class="content"><p>
		You can show a dialog box prior to the game exiting (and
		error handler application being ran, if any).
		If you're choosing to let your game restart on error, this is a little more clear to the
		user than the game just suddenly restarting.
		<div class="item"><a class="header" id="catch_error_set_prompt" href="#catch_error_set_prompt" title="(permalink)">catch_error_set_prompt(kind, ?message, ?title, ?messageBoxType)</a><div class="content"><p>
			
			<tt>kind</tt> (required) can be one of the following:
			<div class="item"><a class="header" id="catch_error_prompt_none" href="#catch_error_prompt_none" title="(permalink)">catch_error_prompt_none</a><div class="content"><p>
				Default - doesn't show any prompts.<br/>When using this, other arguments can be omitted.
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_prompt_message" href="#catch_error_prompt_message" title="(permalink)">catch_error_prompt_message</a><div class="content"><p>
				Shows a message box with an OK button.
			</p></div></div>
			<div class="item"><a class="header" id="catch_error_prompt_question" href="#catch_error_prompt_question" title="(permalink)">catch_error_prompt_question</a><div class="content"><p>
				Shows a message box with Yes/No buttons.<br/>If the user answers "no", application chosen via <a href="#catch_error_exec">catch_error_exec</a> will not be ran.
			</p></div></div>
			
			<tt>message</tt> (optional) is the content of the message box.<br/>This is where you tell the user that you regret to inform that the game/app encountered a
			serious error and will now close.
			</p><p>
			<tt>title</tt> (optional) is the caption of the message box.<br/>If not specified, will be blank (<tt>""</tt>).
			</p><p>
			<tt>messageBoxType</tt> (optional) is what is called <tt>uType</tt> on
			<a href="https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-messagebox#parameters">this MSDN page</a>.<br/>This allows you to further customize the looks of the dialog box.<br/><tt>0x00000010L</tt> is <tt>0x00000010</tt> in GMS2 (no L) or <tt>$00000010</tt> in GMS2 (no L; $ prefix).<br/>Leaving out this parameter will not change the existing flags.<br/>Base "type" (<tt>MB_OK</tt>/<tt>MB_YESNO</tt>) is automatically filled out based on <tt>kind</tt> argument.
			</p><p>
			Example:
			</p><pre class="gmlmd">
<a class="sf" href="#catch_error_init">catch_error_init</a><span class="op">(</span><span class="op">)</span><span class="op">;</span>
<a class="sf" href="#catch_error_set_prompt">catch_error_set_prompt</a><span class="op">(</span><a class="sv" href="#catch_error_prompt_message">catch_error_prompt_message</a><span class="op">,</span>
    <span class="st">"We regret to inform that the game encountered a fatal error and will now close."</span><span class="op">,</span>
    <span class="st">"Error"</span><span class="op">)</span><span class="op">;</span>
</pre><p>for example of <a href="#catch_error_prompt_question">catch_error_prompt_question</a>, see <a href="#catch_error_exec">catch_error_exec</a>.
		</p></div></div>
		<div class="item empty"><a class="header" id="catch_error_get_prompt_kind" href="#catch_error_get_prompt_kind" title="(permalink)">catch_error_get_prompt_kind()<span class="ret-arrow">&#10140;</span>kind</a></div>
		<div class="item empty"><a class="header" id="catch_error_get_prompt_text" href="#catch_error_get_prompt_text" title="(permalink)">catch_error_get_prompt_text()<span class="ret-arrow">&#10140;</span>message</a></div>
		<div class="item empty"><a class="header" id="catch_error_get_prompt_title" href="#catch_error_get_prompt_title" title="(permalink)">catch_error_get_prompt_title()<span class="ret-arrow">&#10140;</span>title</a></div>
		<div class="item empty"><a class="header" id="catch_error_get_prompt_flags" href="#catch_error_get_prompt_flags" title="(permalink)">catch_error_get_prompt_flags()<span class="ret-arrow">&#10140;</span>messageBoxType_flags</a></div>
	</p></div></div>
</p></div></div>
<div class="item"><a class="header" id="faq" href="#faq" title="(permalink)">FAQ</a><div class="content"><p>
	<div class="item"><a class="header" id="faq-how" href="#faq-how" title="(permalink)">How does this work?</a><div class="content"><p>
		The extension works by "catching" and operating the built-in error box.
		</p><p>
		While the implementation details are full of unexciting low-level WinAPI nonsense
		(which is probably the reason why no one did this yet),
		the gist is as following - the DLL steps in as a dialogue box processor,
		gets the information from the GameMaker runtime, and then evaluates what to do
		(show the actual dialog, store error, exit game...) based on instructions provided
		via <a href="#catch_error_">the functions</a>.
		
	</p></div></div>
	<div class="item"><a class="header" id="faq-platforms" href="#faq-platforms" title="(permalink)">What platforms are supported?</a><div class="content"><p>
		The extension works on Windows and Windows (YYC)
		in both GameMaker: Studio and GameMaker Studio 2.
		</p><p>
		While it is possible that additional platforms will be supported in future,
		each would require a completely different implementation,
		and differ in features (for instance, you cannot launch any apps on mobile/consoles/HTML5),
		so it would be unwise to make any particular promises here.
	</p></div></div>
	<div class="item"><a class="header" id="faq-catch" href="#faq-catch" title="(permalink)">What errors are caught?</a><div class="content"><p>
		The extension works for any errors that result in a familiar "code error" box.
		</p><p>
		It cannot catch access violations
		(or other low-level errors that cause a "&lt;name&gt; has stopped working" Windows message)
		as these halt execution abruptly.
		</p><p>
		This may be partially addressed in future (to allow the game to be restarted in such scenario),
		but there isn't much information that you can gather in such case.
	</p></div></div>
	<div class="item"><a class="header" id="faq-try-catch" href="#faq-try-catch" title="(permalink)">Can you use this as try-catch?</a><div class="content"><p>
		If Windows is the only platform of concern,
		absolutely - <a href="#catch_error_clear">clear</a> the queue before performing something problematic,
		then check it's size/contents after finishing.
	</p></div></div>
</p></div></div><!--doc>-->
</div></div></div>
<script>(function() {
var doc, headers;
//
var path = "catch_error documentation";
var state = null;
if (window.localStorage && JSON.parse) {
	state = window.localStorage.getItem(path);
	state = state ? JSON.parse(state) : { };
	if (state == null) state = { };
}
var isLocal = (location.host.indexOf("localhost") == 0);
//
function h3bind(h3) {
	var node = h3.parentNode;
	var snip = node.children[1];
	var id = h3.id || h3.textContent;
	h3.snip = snip;
	h3.doc_set = function(z) {
		if (z) node.classList.add("open"); else node.classList.remove("open");
		if (state) {
			state[id] = z;
			window.localStorage.setItem(path, JSON.stringify(state));
		}
	}
	h3.doc_hide = function() {
		this.doc_set(false);
	}
	h3.doc_show = function() {
		this.doc_set(true);
	}
	h3.onclick = function(_) {
		var seen = !node.classList.contains("open");
		h3.doc_set(seen);
		return false;
	};
}
function getHashFunc(id) {
	var node = document.getElementById(id);
	if (node == null) return null;
	return function(e) {
		while (node && node != doc) {
			if (node.classList.contains("item")) {
				node.classList.add("open");
			}
			node = node.parentElement;
		}
	};
}
// Display helpers:
window.opt_none = function() {
	for (var li = 0; li < headers.length; li++) headers[li].doc_hide();
};
window.opt_list = function() {
	for (var li = 0; li < headers.length; li++) {
		var h3 = headers[li];
		if (h3.parentNode.parentNode != doc) {
			h3.doc_hide();
		} else h3.doc_show();
	}
};
window.opt_all = function() {
	for (var li = 0; li < headers.length; li++) headers[li].doc_show();
};
window.live_post = function() {
	doc = document.getElementById("doc");
	headers = doc.getElementsByClassName("header");
	//
	for (var i = 0; i < headers.length; i++) h3bind(headers[i]);
	// Clicks in document expand the related section:
	var anchors = doc.getElementsByTagName("a");
	for (var i = 0; i < anchors.length; i++) {
		var anchor = anchors[i];
		if (anchor.classList.contains("header")) continue;
		var href = anchor.getAttribute("href");
		if (href[0] == "#") {
			var fn = getHashFunc(href.substr(1));
			if (!fn) {
				anchor.classList.add("broken");
				anchor.title = "(section missing)";
			} else anchor.addEventListener("click", fn);
		}
	}
	//
	for (var li = 0; li < headers.length; li++) {
		var h3 = headers[li];
		var val = state ? state[h3.id || h3.textContent] : null;
		if (val == null) val = isLocal || h3.parentNode.parentNode == doc;
		if (val) h3.doc_show(); else h3.doc_hide();
	}
};
window.live_post();
//
(function() {
	var hash = document.location.hash;
	if (hash) {
		var _hash = hash.substr(1);
		getHashFunc(_hash)();
		setTimeout(function() {
			document.location.hash = hash + " ";
			setTimeout(function() {
				document.location.hash = hash;
			}, 100);
		}, 100);
	}
})();
//
doc.setAttribute("ready", "");
})();
</script>
</body></html>
